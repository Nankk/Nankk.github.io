shadow$provide.module$node_modules$google_auth_library$build$src$auth$googleauth=function(global,require,module,exports){var process=require("module$node_modules$process$browser");"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var child_process_1=require("shadow$empty"),fs=require("shadow$empty"),gcpMetadata=require("module$node_modules$gcp_metadata$build$src$index"),os=require("module$node_modules$os_browserify$browser"),path=require("module$node_modules$path_browserify$index"),
crypto_1=require("module$node_modules$google_auth_library$build$src$crypto$crypto"),messages=require("module$node_modules$google_auth_library$build$src$messages");global=require("module$node_modules$google_auth_library$build$src$transporters");var computeclient_1=require("module$node_modules$google_auth_library$build$src$auth$computeclient"),envDetect_1=require("module$node_modules$google_auth_library$build$src$auth$envDetect"),jwtclient_1=require("module$node_modules$google_auth_library$build$src$auth$jwtclient"),
refreshclient_1=require("module$node_modules$google_auth_library$build$src$auth$refreshclient");exports.CLOUD_SDK_CLIENT_ID="764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com";require=function(opts){this.checkIsGCE=void 0;this.cachedCredential=this.jsonContent=null;opts=opts||{};this._cachedProjectId=opts.projectId||null;this.keyFilename=opts.keyFilename||opts.keyFile;this.scopes=opts.scopes;this.jsonContent=opts.credentials||null;this.clientOptions=opts.clientOptions};require.prototype.getDefaultProjectId=
function(callback){messages.warn(messages.DEFAULT_PROJECT_ID_DEPRECATED);if(callback)this.getProjectIdAsync().then(function(r){return callback(null,r)},callback);else return this.getProjectIdAsync()};require.prototype.getProjectId=function(callback){if(callback)this.getProjectIdAsync().then(function(r){return callback(null,r)},callback);else return this.getProjectIdAsync()};require.prototype.getProjectIdAsync=function(){var $jscomp$this=this;if(this._cachedProjectId)return Promise.resolve(this._cachedProjectId);
this._getDefaultProjectIdPromise||(this._getDefaultProjectIdPromise=new Promise(function(resolve,reject){var JSCompiler_temp,JSCompiler_temp$jscomp$0,JSCompiler_temp$jscomp$1,projectId,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:$jscomp$generator$context.setCatchFinallyBlocks(2);if(JSCompiler_temp=$jscomp$this.getProductionProjectId()){$jscomp$generator$context.jumpTo(4);break}return $jscomp$generator$context.yield($jscomp$this.getFileProjectId(),
5);case 5:JSCompiler_temp=$jscomp$generator$context.yieldResult;case 4:if(JSCompiler_temp$jscomp$0=JSCompiler_temp){$jscomp$generator$context.jumpTo(6);break}return $jscomp$generator$context.yield($jscomp$this.getDefaultServiceProjectId(),7);case 7:JSCompiler_temp$jscomp$0=$jscomp$generator$context.yieldResult;case 6:if(JSCompiler_temp$jscomp$1=JSCompiler_temp$jscomp$0){$jscomp$generator$context.jumpTo(8);break}return $jscomp$generator$context.yield($jscomp$this.getGCEProjectId(),9);case 9:JSCompiler_temp$jscomp$1=
$jscomp$generator$context.yieldResult;case 8:projectId=JSCompiler_temp$jscomp$1;$jscomp$this._cachedProjectId=projectId;if(!projectId)throw Error("Unable to detect a Project Id in the current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started");resolve(projectId);$jscomp$generator$context.leaveTryBlock(0);break;case 2:e=$jscomp$generator$context.enterCatchBlock(),reject(e),$jscomp$generator$context.jumpToEnd()}})}));
return this._getDefaultProjectIdPromise};require.prototype.getApplicationDefault=function(optionsOrCallback,callback){optionsOrCallback=void 0===optionsOrCallback?{}:optionsOrCallback;var options;"function"===typeof optionsOrCallback?callback=optionsOrCallback:options=optionsOrCallback;if(callback)this.getApplicationDefaultAsync(options).then(function(r){return callback(null,r.credential,r.projectId)},callback);else return this.getApplicationDefaultAsync(options)};require.prototype.getApplicationDefaultAsync=
function(options){options=void 0===options?{}:options;var $jscomp$async$this=this,JSCompiler_temp_const,credential,projectId,isGCE,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:if(!$jscomp$async$this.cachedCredential){$jscomp$generator$context.jumpTo(2);break}JSCompiler_temp_const=$jscomp$async$this.cachedCredential;return $jscomp$generator$context.yield($jscomp$async$this.getProjectIdAsync(),3);case 3:return $jscomp$generator$context.return({credential:JSCompiler_temp_const,
projectId:$jscomp$generator$context.yieldResult});case 2:return $jscomp$generator$context.yield($jscomp$async$this._tryGetApplicationCredentialsFromEnvironmentVariable(options),4);case 4:credential=$jscomp$generator$context.yieldResult;if(!credential){$jscomp$generator$context.jumpTo(5);break}credential instanceof jwtclient_1.JWT&&(credential.scopes=$jscomp$async$this.scopes);$jscomp$async$this.cachedCredential=credential;return $jscomp$generator$context.yield($jscomp$async$this.getProjectId(),6);
case 6:return projectId=$jscomp$generator$context.yieldResult,$jscomp$generator$context.return({credential:credential,projectId:projectId});case 5:return $jscomp$generator$context.yield($jscomp$async$this._tryGetApplicationCredentialsFromWellKnownFile(options),7);case 7:credential=$jscomp$generator$context.yieldResult;if(!credential){$jscomp$generator$context.jumpTo(8);break}credential instanceof jwtclient_1.JWT&&(credential.scopes=$jscomp$async$this.scopes);$jscomp$async$this.cachedCredential=credential;
return $jscomp$generator$context.yield($jscomp$async$this.getProjectId(),9);case 9:return projectId=$jscomp$generator$context.yieldResult,$jscomp$generator$context.return({credential:credential,projectId:projectId});case 8:return $jscomp$generator$context.setCatchFinallyBlocks(10),$jscomp$generator$context.yield($jscomp$async$this._checkIsGCE(),12);case 12:isGCE=$jscomp$generator$context.yieldResult;$jscomp$generator$context.leaveTryBlock(11);break;case 10:throw e=$jscomp$generator$context.enterCatchBlock(),
e.message="Unexpected error determining execution environment: "+e.message,e;case 11:if(!isGCE)throw Error("Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.");options.scopes=$jscomp$async$this.scopes;$jscomp$async$this.cachedCredential=new computeclient_1.Compute(options);return $jscomp$generator$context.yield($jscomp$async$this.getProjectId(),13);case 13:return projectId=$jscomp$generator$context.yieldResult,$jscomp$generator$context.return({projectId:projectId,
credential:$jscomp$async$this.cachedCredential})}})};require.prototype._checkIsGCE=function(){var $jscomp$async$this=this,JSCompiler_temp_const;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1==$jscomp$generator$context.nextAddress){if(void 0!==$jscomp$async$this.checkIsGCE)return $jscomp$generator$context.jumpTo(2);JSCompiler_temp_const=$jscomp$async$this;return $jscomp$generator$context.yield(gcpMetadata.isAvailable(),3)}2!=$jscomp$generator$context.nextAddress&&
(JSCompiler_temp_const.checkIsGCE=$jscomp$generator$context.yieldResult);return $jscomp$generator$context.return($jscomp$async$this.checkIsGCE)})};require.prototype._tryGetApplicationCredentialsFromEnvironmentVariable=function(options){var $jscomp$async$this=this,credentialsPath;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){credentialsPath=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!credentialsPath||0===credentialsPath.length)return $jscomp$generator$context.return(null);
try{return $jscomp$generator$context.return($jscomp$async$this._getApplicationCredentialsFromFilePath(credentialsPath,options))}catch(e){throw e.message="Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: "+e.message,e;}})};require.prototype._tryGetApplicationCredentialsFromWellKnownFile=function(options){var $jscomp$async$this=this,location,home,client;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1==
$jscomp$generator$context.nextAddress)return location=null,$jscomp$async$this._isWindows()?location=process.env.APPDATA:(home=process.env.HOME)&&(location=path.join(home,".config")),location&&(location=path.join(location,"gcloud","application_default_credentials.json"),fs.existsSync(location)||(location=null)),location?$jscomp$generator$context.yield($jscomp$async$this._getApplicationCredentialsFromFilePath(location,options),2):$jscomp$generator$context.return(null);client=$jscomp$generator$context.yieldResult;
$jscomp$async$this.warnOnProblematicCredentials(client);return $jscomp$generator$context.return(client)})};require.prototype._getApplicationCredentialsFromFilePath=function(filePath,options){options=void 0===options?{}:options;var $jscomp$async$this=this,readStream;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(!filePath||0===filePath.length)throw Error("The file path is invalid.");try{if(filePath=fs.realpathSync(filePath),!fs.lstatSync(filePath).isFile())throw Error();
}catch(err){throw err.message="The file at "+filePath+" does not exist, or it is not a file. "+err.message,err;}readStream=fs.createReadStream(filePath);return $jscomp$generator$context.return($jscomp$async$this.fromStream(readStream,options))})};require.prototype.warnOnProblematicCredentials=function(client){client.email===exports.CLOUD_SDK_CLIENT_ID&&messages.warn(messages.PROBLEMATIC_CREDENTIALS_WARNING)};require.prototype.fromJSON=function(json,options){if(!json)throw Error("Must pass in a JSON object containing the Google auth settings.");
options=options||{};"authorized_user"===json.type?options=new refreshclient_1.UserRefreshClient(options):(options.scopes=this.scopes,options=new jwtclient_1.JWT(options));options.fromJSON(json);return options};require.prototype._cacheClientFromJSON=function(json,options){options=options||{};"authorized_user"===json.type?options=new refreshclient_1.UserRefreshClient(options):(options.scopes=this.scopes,options=new jwtclient_1.JWT(options));options.fromJSON(json);this.jsonContent=json;return this.cachedCredential=
options};require.prototype.fromStream=function(inputStream,optionsOrCallback,callback){optionsOrCallback=void 0===optionsOrCallback?{}:optionsOrCallback;var options={};"function"===typeof optionsOrCallback?callback=optionsOrCallback:options=optionsOrCallback;if(callback)this.fromStreamAsync(inputStream,options).then(function(r){return callback(null,r)},callback);else return this.fromStreamAsync(inputStream,options)};require.prototype.fromStreamAsync=function(inputStream,options){var $jscomp$this=
this;return new Promise(function(resolve,reject){if(!inputStream)throw Error("Must pass in a stream containing the Google auth settings.");var s="";inputStream.setEncoding("utf8").on("error",reject).on("data",function(chunk){return s+=chunk}).on("end",function(){try{var data=JSON.parse(s),r=$jscomp$this._cacheClientFromJSON(data,options);return resolve(r)}catch(err){return reject(err)}})})};require.prototype.fromAPIKey=function(apiKey,options){options=options||{};options=new jwtclient_1.JWT(options);
options.fromAPIKey(apiKey);return options};require.prototype._isWindows=function(){var sys=os.platform();return sys&&3<=sys.length&&"win"===sys.substring(0,3).toLowerCase()?!0:!1};require.prototype.getDefaultServiceProjectId=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){return $jscomp$generator$context.return(new Promise(function(resolve){child_process_1.exec("gcloud config config-helper --format json",function(err,stdout,stderr){if(!err&&stdout)try{var projectId=
JSON.parse(stdout).configuration.properties.core.project;resolve(projectId);return}catch(e){}resolve(null)})}))})};require.prototype.getProductionProjectId=function(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project};require.prototype.getFileProjectId=function(){var $jscomp$async$this=this,creds,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:if($jscomp$async$this.cachedCredential)return $jscomp$generator$context.return($jscomp$async$this.cachedCredential.projectId);
if(!$jscomp$async$this.keyFilename){$jscomp$generator$context.jumpTo(2);break}return $jscomp$generator$context.yield($jscomp$async$this.getClient(),3);case 3:if((creds=$jscomp$generator$context.yieldResult)&&creds.projectId)return $jscomp$generator$context.return(creds.projectId);case 2:return $jscomp$generator$context.yield($jscomp$async$this._tryGetApplicationCredentialsFromEnvironmentVariable(),4);case 4:return(r=$jscomp$generator$context.yieldResult)?$jscomp$generator$context.return(r.projectId):
$jscomp$generator$context.return(null)}})};require.prototype.getGCEProjectId=function(){var r;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1==$jscomp$generator$context.nextAddress)return $jscomp$generator$context.setCatchFinallyBlocks(2),$jscomp$generator$context.yield(gcpMetadata.project("project-id"),4);if(2!=$jscomp$generator$context.nextAddress)return r=$jscomp$generator$context.yieldResult,$jscomp$generator$context.return(r);$jscomp$generator$context.enterCatchBlock();
return $jscomp$generator$context.return(null)})};require.prototype.getCredentials=function(callback){if(callback)this.getCredentialsAsync().then(function(r){return callback(null,r)},callback);else return this.getCredentialsAsync()};require.prototype.getCredentialsAsync=function(){var $jscomp$async$this=this,credential,isGCE,data;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:return $jscomp$generator$context.yield($jscomp$async$this.getClient(),
2);case 2:return $jscomp$async$this.jsonContent?(credential={client_email:$jscomp$async$this.jsonContent.client_email,private_key:$jscomp$async$this.jsonContent.private_key},$jscomp$generator$context.return(credential)):$jscomp$generator$context.yield($jscomp$async$this._checkIsGCE(),3);case 3:isGCE=$jscomp$generator$context.yieldResult;if(!isGCE)throw Error("Unknown error.");return $jscomp$generator$context.yield(gcpMetadata.instance({property:"service-accounts/",params:{recursive:"true"}}),4);case 4:data=
$jscomp$generator$context.yieldResult;if(!data||!data.default||!data.default.email)throw Error("Failure from metadata server.");return $jscomp$generator$context.return({client_email:data.default.email})}})};require.prototype.getClient=function(options){var $jscomp$async$this=this,filePath,stream;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1==$jscomp$generator$context.nextAddress){if(options)throw Error("Passing options to getClient is forbidden in v5.0.0. Use new GoogleAuth(opts) instead.");
return $jscomp$async$this.cachedCredential?$jscomp$generator$context.jumpTo(2):$jscomp$async$this.jsonContent?($jscomp$async$this._cacheClientFromJSON($jscomp$async$this.jsonContent,$jscomp$async$this.clientOptions),$jscomp$generator$context.jumpTo(2)):$jscomp$async$this.keyFilename?(filePath=path.resolve($jscomp$async$this.keyFilename),stream=fs.createReadStream(filePath),$jscomp$generator$context.yield($jscomp$async$this.fromStreamAsync(stream,$jscomp$async$this.clientOptions),2)):$jscomp$generator$context.yield($jscomp$async$this.getApplicationDefaultAsync($jscomp$async$this.clientOptions),
2)}return $jscomp$generator$context.return($jscomp$async$this.cachedCredential)})};require.prototype.getAccessToken=function(){var $jscomp$async$this=this,client;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){return 1==$jscomp$generator$context.nextAddress?$jscomp$generator$context.yield($jscomp$async$this.getClient(),2):3!=$jscomp$generator$context.nextAddress?(client=$jscomp$generator$context.yieldResult,$jscomp$generator$context.yield(client.getAccessToken(),
3)):$jscomp$generator$context.return($jscomp$generator$context.yieldResult.token)})};require.prototype.getRequestHeaders=function(url){var $jscomp$async$this=this,client;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1==$jscomp$generator$context.nextAddress)return $jscomp$generator$context.yield($jscomp$async$this.getClient(),2);client=$jscomp$generator$context.yieldResult;return $jscomp$generator$context.return(client.getRequestHeaders(url))})};require.prototype.authorizeRequest=
function(opts){var $jscomp$async$this=this,url,client,headers;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1==$jscomp$generator$context.nextAddress)return opts=opts||{},url=opts.url||opts.uri,$jscomp$generator$context.yield($jscomp$async$this.getClient(),2);if(3!=$jscomp$generator$context.nextAddress)return client=$jscomp$generator$context.yieldResult,$jscomp$generator$context.yield(client.getRequestHeaders(url),3);headers=$jscomp$generator$context.yieldResult;
opts.headers=Object.assign(opts.headers||{},headers);return $jscomp$generator$context.return(opts)})};require.prototype.request=function(opts){var $jscomp$async$this=this,client;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){if(1==$jscomp$generator$context.nextAddress)return $jscomp$generator$context.yield($jscomp$async$this.getClient(),2);client=$jscomp$generator$context.yieldResult;return $jscomp$generator$context.return(client.request(opts))})};require.prototype.getEnv=
function(){return envDetect_1.getEnv()};require.prototype.sign=function(data){var $jscomp$async$this=this,client,crypto,sign,projectId,creds,id,res;return $jscomp.asyncExecutePromiseGeneratorProgram(function($jscomp$generator$context){switch($jscomp$generator$context.nextAddress){case 1:return $jscomp$generator$context.yield($jscomp$async$this.getClient(),2);case 2:client=$jscomp$generator$context.yieldResult;crypto=crypto_1.createCrypto();if(!(client instanceof jwtclient_1.JWT&&client.key)){$jscomp$generator$context.jumpTo(3);
break}return $jscomp$generator$context.yield(crypto.sign(client.key,data),4);case 4:return sign=$jscomp$generator$context.yieldResult,$jscomp$generator$context.return(sign);case 3:return $jscomp$generator$context.yield($jscomp$async$this.getProjectId(),5);case 5:projectId=$jscomp$generator$context.yieldResult;if(!projectId)throw Error("Cannot sign data without a project ID.");return $jscomp$generator$context.yield($jscomp$async$this.getCredentials(),6);case 6:creds=$jscomp$generator$context.yieldResult;
if(!creds.client_email)throw Error("Cannot sign data without `client_email`.");id="projects/"+projectId+"/serviceAccounts/"+creds.client_email;return $jscomp$generator$context.yield($jscomp$async$this.request({method:"POST",url:"https://iam.googleapis.com/v1/"+id+":signBlob",data:{bytesToSign:crypto.encodeBase64StringUtf8(data)}}),7);case 7:return res=$jscomp$generator$context.yieldResult,$jscomp$generator$context.return(res.data.signature)}})};$jscomp.global.Object.defineProperties(require.prototype,
{isGCE:{configurable:!0,enumerable:!0,get:function(){return this.checkIsGCE}}});exports.GoogleAuth=require;require.DefaultTransporter=global.DefaultTransporter}
//# sourceMappingURL=module$node_modules$google_auth_library$build$src$auth$googleauth.js.map
